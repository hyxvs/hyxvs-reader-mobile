import{_ as L,i as R,c as b,a as n,b as o,w as a,j as c,d as l,e as H,r as w,o as p,f as _,F as N,k as V,l as D,t as h}from"./index-BC7CpVgk.js";import{g as F}from"./books-BDs5bHVb.js";import{g as M}from"./borrow-Bb7Fnbv5.js";import{g as T}from"./reservation-WAyaT4Qw.js";import"./request-BWFo0bpa.js";const j={class:"home-page"},q={class:"header-banner"},E={class:"quick-actions"},I={class:"hot-books"},A={class:"section-header"},G={class:"my-stats"},J={__name:"Home",setup(K){const r=H(),m=w([]),i=w({borrowing:0,reservation:0,total:0}),k=async()=>{try{const s=await F({page:1,pageSize:10,sort:"borrow_count",order:"desc"});m.value=s.data.list||[]}catch(s){console.error("获取热门图书失败:",s)}},y=async()=>{try{const s=await M({page:1,pageSize:1}),t=await T({page:1,pageSize:1});i.value.borrowing=s.data.total||0,i.value.reservation=t.data.total||0,i.value.total=s.data.total||0}catch(s){console.error("获取统计数据失败:",s)}},$=s=>{r.push(`/books/${s}`)};return R(()=>{k(),y()}),(s,t)=>{const v=l("van-swipe-item"),f=l("van-swipe"),x=l("van-notice-bar"),u=l("van-grid-item"),B=l("van-grid"),C=l("van-button"),g=l("van-tag"),z=l("van-card"),d=l("van-cell"),S=l("van-cell-group");return p(),b("div",j,[n("div",q,[o(f,{autoplay:3e3,"indicator-color":"white"},{default:a(()=>[o(v,null,{default:a(()=>[...t[5]||(t[5]=[n("div",{class:"banner-item"},[n("h2",null,"欢迎来到图书馆"),n("p",null,"发现知识的海洋")],-1)])]),_:1}),o(v,null,{default:a(()=>[...t[6]||(t[6]=[n("div",{class:"banner-item"},[n("h2",null,"热门图书推荐"),n("p",null,"精选好书等你来读")],-1)])]),_:1})]),_:1})]),o(x,{"left-icon":"volume-o",text:"欢迎使用图书馆读者系统，随时随地查询图书",background:"#ecf9ff",color:"#1989fa"}),n("div",E,[o(B,{"column-num":4,border:!1},{default:a(()=>[o(u,{icon:"search",text:"图书查询",onClick:t[0]||(t[0]=e=>c(r).push("/books"))}),o(u,{icon:"todo-list-o",text:"我的借阅",onClick:t[1]||(t[1]=e=>c(r).push("/borrow"))}),o(u,{icon:"bookmark-o",text:"我的预约",onClick:t[2]||(t[2]=e=>c(r).push("/reservation"))}),o(u,{icon:"user-o",text:"个人中心",onClick:t[3]||(t[3]=e=>c(r).push("/profile"))})]),_:1})]),n("div",I,[n("div",A,[t[8]||(t[8]=n("h3",null,"热门图书",-1)),o(C,{type:"primary",size:"small",plain:"",onClick:t[4]||(t[4]=e=>c(r).push("/books"))},{default:a(()=>[...t[7]||(t[7]=[_("查看更多",-1)])]),_:1})]),o(f,{width:140,loop:!1},{default:a(()=>[(p(!0),b(N,null,V(m.value,e=>(p(),D(v,{key:e.id},{default:a(()=>[o(z,{thumb:e.cover?`http://localhost:3000${e.cover}`:"https://picsum.photos/140",title:e.title,desc:e.author,onClick:O=>$(e.id)},{tags:a(()=>[o(g,{type:"primary",size:"small"},{default:a(()=>[_(h(e.category_name),1)]),_:2},1024)]),footer:a(()=>[o(g,{type:e.available_count>0?"success":"warning"},{default:a(()=>[_(h(e.available_count>0?"可借":"已借完"),1)]),_:2},1032,["type"])]),_:2},1032,["thumb","title","desc","onClick"])]),_:2},1024))),128))]),_:1})]),n("div",G,[o(S,{title:"我的统计",inset:""},{default:a(()=>[o(d,{title:"当前借阅",value:`${i.value.borrowing}本`,icon:"todo-list-o"},null,8,["value"]),o(d,{title:"当前预约",value:`${i.value.reservation}本`,icon:"bookmark-o"},null,8,["value"]),o(d,{title:"历史借阅",value:`${i.value.total}本`,icon:"records-o"},null,8,["value"])]),_:1})])])}}},Y=L(J,[["__scopeId","data-v-db04f72b"]]);export{Y as default};
